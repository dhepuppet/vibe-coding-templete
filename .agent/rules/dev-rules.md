---
trigger: always_on
---

# 개발 규칙

## Plan/Act 모드

### Plan 모드 (기본)
- 일반 요청 → 계획만 작성, 코드 수정 X
- 출력: 무엇을 할지, 어떻게 할지 설명만

### Act 모드 (승인 후)
- "Act", "승인", "진행해" → 실제 코드 수정
- Plan 없이 Act 금지

---

## 작업 흐름 (절대 생략 금지)

1. Preflight 작성 → 승인 대기
2. Plan 작성 → 승인 대기
3. Tasks 체크리스트 → 승인 대기
4. 승인 후 Build (Act 모드)
5. Task 완료마다 Gate 검증

### 금지
- 승인 없이 Build 시작
- Plan/Tasks 생략
- 승인 없이 Act 모드 진입

---

## Gate 시스템

Gate 미통과 = 다음 기능 금지

### 기본 Gate
- Gate 1: 기본 흐름 10회 안정
- Gate 2: 에러 시 로그 재현 가능
- Gate 3: 중단/재시작 정상
- Gate 4: 엣지케이스 3개+

---

## 최소 diff 규칙

| 항목 | 제한 |
|------|------|
| 전체 재작성 | 금지 |
| 변경 파일 | ≤2개 |
| 변경 라인 | ≤30줄 |
| 새 의존성 | 승인 후 |

---

## 2-루프 룰

같은 에러 2회 반복 → 롤백 + MRE + Debug Packet

---

## 자기검증
- 불확실 → `[확인필요]`, 가정 → `[가정]`
- 기존 코드 수정/삭제 → 영향 알림 + 승인 먼저
- 10턴+ → 핵심 결정 요약
